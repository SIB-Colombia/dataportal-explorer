/*
 * knockout-kendo v0.6.2
 * Copyright Â© 2013 Ryan Niemeyer & Telerik
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); 
 * you may not use this file except in compliance with the License. 
 * You may obtain a copy of the License at

 * http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software 
 * distributed under the License is distributed on an "AS IS" BASIS, 
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. 
 * See the License for the specific language governing permissions and 
 * limitations under the License.
 */
(function(e){typeof require=="function"&&typeof exports=="object"&&typeof module=="object"?e(require("knockout"),require("jquery"),require("kendo")):typeof define=="function"&&define.amd?define(["knockout","jquery","kendo"],e):e(window.ko,window.jQuery,window.kendo)})(function(e,t,n,r){e.kendo=e.kendo||{},e.kendo.BindingFactory=function(){var i=this;this.createBinding=function(n){if(!t()[n.parent||n.name])return;var r={};r.init=function(e,t,s,o,u){var a=i.buildOptions(n,t);if(a.async===!0||n.async===!0&&a.async!==!1){setTimeout(function(){r.setup(e,a,u)},0);return}r.setup(e,a,u);if(a&&a.useKOTemplates)return{controlsDescendantBindings:!0}},r.setup=function(r,s,o){var u,a=t(r);i.setupTemplates(n.templates,s,r,o),u=i.getWidget(n,s,a),i.handleEvents(s,n,r,u),i.watchValues(u,s,n,r),u.destroy&&e.utils.domNodeDisposal.addDisposeCallback(r,function(){u.destroy()})},r.options={},r.widgetConfig=n,e.bindingHandlers[n.bindingName||n.name]=r},this.buildOptions=function(t,r){var i=t.defaultOption,s=e.utils.extend({},e.bindingHandlers[t.name].options),o=e.utils.unwrapObservable(r());return o instanceof n.data.DataSource||typeof o!="object"||o===null||i&&!(i in o)?s[i]=r():e.utils.extend(s,o),s};var s=function(t,n){return function(r){return e.renderTemplate(t,n.createChildContext(r._raw&&r._raw()||r))}};this.setupTemplates=function(t,n,r,i){var o,u,a,f;if(t&&n&&n.useKOTemplates){for(o=0,u=t.length;o<u;o++)a=t[o],n[a]&&(n[a]=s(n[a],i));f=n.dataBound,n.dataBound=function(){e.memoization.unmemoizeDomNodeAndDescendants(r),f&&f.apply(this,arguments)}}},this.unwrapOneLevel=function(t){var r,i={};if(t)if(t instanceof n.data.DataSource)i=t;else if(typeof t=="object")for(r in t)i[r]=e.utils.unwrapObservable(t[r]);return i},this.getWidget=function(t,n,r){var i;if(t.parent){var s=r.closest("[data-bind*='"+t.parent+":']");i=s.length?s.data(t.parent):null}else i=r[t.name](this.unwrapOneLevel(n)).data(t.name);return e.isObservable(n.widget)&&n.widget(i),i},this.watchValues=function(e,t,n,r){var s,o=n.watch;if(o)for(s in o)o.hasOwnProperty(s)&&i.watchOneValue(s,e,t,n,r)},this.watchOneValue=function(n,i,s,o,u){var a=e.computed({read:function(){var a,f,l=o.watch[n],c=e.utils.unwrapObservable(s[n]),h=o.parent?[u]:[];t.isArray(l)?l=i[c?l[0]:l[1]]:typeof l=="string"?l=i[l]:f=!0,l&&s[n]!==r&&(f?h.push(c,s):(a=l.apply(i,h),h.push(c)),(f||a!==c)&&l.apply(i,h))},disposeWhenNodeIsRemoved:u});e.isObservable(s[n])||a.dispose()},this.handleEvents=function(t,n,r,s){var o,u,a=n.events;if(a)for(o in a)a.hasOwnProperty(o)&&(u=a[o],typeof u=="string"&&(u={value:u,writeTo:u}),e.isObservable(t[u.writeTo])&&i.handleOneEvent(o,u,t,r,s,n.childProp))},this.handleOneEvent=function(e,t,n,r,i,s){i.bind(e,function(e){var i,o;if(!s||!e[s]||e[s]===r)i=t.value,o=typeof i=="string"&&this[i]?this[i](s&&r):i,n[t.writeTo](o)})}},e.kendo.bindingFactory=new e.kendo.BindingFactory,e.kendo.setDataSource=function(t,r,i){var s,o;if(r instanceof n.data.DataSource){t.setDataSource(r);return}if(!i||!i.useKOTemplates)s=e.mapping&&r&&r.__ko_mapping__,o=r&&s?e.mapping.toJS(r):e.toJS(r);t.dataSource.data(o||r)},function(){var e=n.data.ObservableArray.fn.wrap;n.data.ObservableArray.fn.wrap=function(t){var n=e.apply(this,arguments);return n._raw=function(){return t},n}}();var i=function(t){return function(n){n&&(e.utils.extend(this.options[t],n),this.redraw(),this.value(.001+this.value()))}},s=e.kendo.bindingFactory.createBinding.bind(e.kendo.bindingFactory),o="close",u="collapse",a="content",f="data",l="enable",c="expand",h="enabled",p="expanded",d="filter",v="hide",m="isOpen",g="max",y="min",b="open",w="palette",E="resize",S="search",x="select",T="selected",N="show",C="size",k="target",L="title",A="value",O="values";s({name:"kendoAutoComplete",events:{change:A,open:{writeTo:m,value:!0},close:{writeTo:m,value:!1}},watch:{enabled:l,search:[S,o],data:function(t){e.kendo.setDataSource(this,t)},value:A}}),s({name:"kendoCalendar",defaultOption:A,events:{change:A},watch:{max:g,min:y,value:A}}),s({name:"kendoColorPicker",events:{change:A,open:{writeTo:m,value:!0},close:{writeTo:m,value:!1}},watch:{enabled:l,value:A,color:A,palette:w}}),s({name:"kendoComboBox",events:{change:A,open:{writeTo:m,value:!0},close:{writeTo:m,value:!1}},watch:{enabled:l,isOpen:[b,o],data:function(t){e.kendo.setDataSource(this,t)},value:A}}),s({name:"kendoDatePicker",defaultOption:A,events:{change:A,open:{writeTo:m,value:!0},close:{writeTo:m,value:!1}},watch:{enabled:l,max:g,min:y,value:A,isOpen:[b,o]}}),s({name:"kendoDateTimePicker",defaultOption:A,events:{change:A,open:{writeTo:m,value:!0},close:{writeTo:m,value:!1}},watch:{enabled:l,max:g,min:y,value:A,isOpen:[b,o]}}),s({name:"kendoDropDownList",events:{change:A,open:{writeTo:m,value:!0},close:{writeTo:m,value:!1}},watch:{enabled:l,isOpen:[b,o],data:function(t){e.kendo.setDataSource(this,t)},value:A}}),s({name:"kendoEditor",defaultOption:A,events:{change:A},watch:{enabled:l,value:A}}),s({name:"kendoGrid",defaultOption:f,watch:{data:function(t,n){e.kendo.setDataSource(this,t,n)}},templates:["rowTemplate","altRowTemplate"]}),s({name:"kendoListView",defaultOption:f,watch:{data:function(t,n){e.kendo.setDataSource(this,t,n)}},templates:["template"]}),s({name:"kendoMenu",async:!0}),s({name:"kendoMenuItem",parent:"kendoMenu",watch:{enabled:l,isOpen:[b,o]},async:!0}),s({name:"kendoMultiSelect",events:{change:A,open:{writeTo:m,value:!0},close:{writeTo:m,value:!1}},watch:{enabled:l,search:[S,o],data:function(t){e.kendo.setDataSource(this,t)},value:A}}),s({name:"kendoNumericTextBox",defaultOption:A,events:{change:A},watch:{enabled:l,value:A,max:function(e){this.options.max=e,this.value()>e&&this.value(e)},min:function(e){this.options.min=e,this.value()<e&&this.value(e)}}}),s({name:"kendoPanelBar",async:!0}),s({name:"kendoPanelItem",parent:"kendoPanelBar",watch:{enabled:l,expanded:[c,u]},childProp:"item",events:{expand:{writeTo:p,value:!0},collapse:{writeTo:p,value:!1}},async:!0}),s({name:"kendoRangeSlider",defaultOption:O,events:{change:O},watch:{values:O,enabled:l}}),s({name:"kendoSlider",defaultOption:A,events:{change:A},watch:{value:A,enabled:l}}),s({name:"kendoSplitter",async:!0}),s({name:"kendoSplitterPane",parent:"kendoSplitter",watch:{max:g,min:y,size:C,expanded:[c,u]},childProp:"pane",events:{collapse:{writeTo:p,value:!1},expand:{writeTo:p,value:!0},resize:C},async:!0}),s({name:"kendoTabStrip",async:!0}),s({name:"kendoTab",parent:"kendoTabStrip",watch:{enabled:l},childProp:"item",async:!0}),s({name:"kendoTooltip",events:{},watch:{content:a,filter:d}}),s({name:"kendoTimePicker",defaultOption:A,events:{change:A},watch:{max:g,min:y,value:A,enabled:l,isOpen:[b,o]}}),s({name:"kendoTreeView",async:!0}),s({name:"kendoTreeItem",parent:"kendoTreeView",watch:{enabled:l,expanded:[c,u],selected:function(e,t){this.select(t?e:null)}},childProp:"node",events:{collapse:{writeTo:p,value:!1},expand:{writeTo:p,value:!0},select:{writeTo:T,value:!0}},async:!0}),s({name:"kendoUpload",watch:{enabled:l}}),s({async:!0,name:"kendoWindow",events:{open:{writeTo:m,value:!0},close:{writeTo:m,value:!1}},watch:{content:a,title:L,isOpen:[b,o]}}),s({name:"kendoChart",watch:{data:function(t){e.kendo.setDataSource(this,t)}}}),s({name:"kendoLinearGauge",defaultOption:A,watch:{value:A,gaugeArea:i("gaugeArea"),pointer:i("pointer"),scale:i("scale")}}),s({name:"kendoRadialGauge",defaultOption:A,watch:{value:A,gaugeArea:i("gaugeArea"),pointer:i("pointer"),scale:i("scale")}})})